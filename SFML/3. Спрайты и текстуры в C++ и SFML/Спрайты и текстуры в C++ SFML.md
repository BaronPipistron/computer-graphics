***Текстура - это обычная картинка, которая накладывается на двумерный объект***

***Спрайт - это любая геометрическая фигура с нанесенной поверх нее текстурой***

## Загрузка текстуры
Прежде чем создать какой-нибудь спрайт, нам нужна текстура. Класс SFML, который предоставляет возможность работать с текстурами называется `Texture`

Так как единственной целью текстуры является ее загрузка из источника и на несение на объект, то назначение практически всех функций данного класса сводится в большинстве своем к двум задачам - к загрузке текстуры и к ее отображению в программе

Основным способом загрузки текстуры является считывание информации о ней из графического файла, расположенного на компьютере.

```cpp
while (window.isOpen()) {
	// ...
	// обрабатываем события
	// ...

	// создаем переменную текстуры и подгружаем ее из файла
	sf::Texture texture;
	texture.loadFromFile("path/to/file");

	// создаем спрайт и устанавливаем ему нашу текстуру
	sf::Sprite sprite(texture);

	// отрисовка спрайта
	window.draw(sprite);

	// ...
}
```

*Библиотека SFML поддерживает работу со всеми основными форматами графических файлов*

Есть еще несколько способов загрузки текстуры:
- загрузка файла текстуры из памяти с помощью метода `loadFromMemory()`
- загрузка из потока с помощью метода `loadFromStream()`
- загрузка из файла, который уже был загружен, с помощью метода `loadFromImage()`

Все эти функции имеют необязательный аргумент, который можно использовать, если мы хотим загрузить лишь часть изображения

```cpp
texture.loadFromFile("image.png", sf::IntRect(10, 10, 32, 32));
```
Загружаем кусочек текстуры размеров 32х32 пикселя, начинающийся с координат `(10, 10)`

Также у текстуры есть два интересных свойства, влияющие на то, как она будет отображаться на экране. 

Первое свойство - ***сглаживание***, которое делает границы пикселей менее видимыми. Но из-за этого изображение становится немного размытым
```cpp
sf::Texture texture;
texture.loadFromFile("path");

// включаем режим сглаживания для нашей текстуры
texture.setSmooth(true);

sf::Sprite sprite(texture);
```

*Особенно полезно это свойство при масштабировании текстуры*

Второе свойство ***позволяет многократно повторять текстуру в пределах одного спрайта***

```cpp
sf::Texture texture;
texture.loadFromFile("path");

// включаем режим повторения для текстуры
texture.setRepeated(true);

//создаем спрайт размером 400х198 и присваиваем ему нашу текстуру, которая имеет размер 100х100
sf::Sprite sprite(texture, sf::IntRect(0, 0, 400, 198));
```

*Данный способ работает только тогда, когда размеры спрайта больше размеров текстуры, в противном случае ничего не получится*

Можно изменить и цвет самого спрайта, который будет мультипликативно складываться с текущей текстурой. Благодаря этому свойства удобно изменять значение прозрачности спрайта

```cpp
sf::Texture texture;

texture.loadFromFile("path");

sf::Sprite sprite1(texture);
sf::Spreit sprite2(texture);

sprite1.move(105, 0);
sprite1.setColor(sf::Color::Red);

sprite2.move(210, 0);
sprite2.setColor(sf::Color(255, 255, 255, 64));
```

## Трансформации
К спрайтам можно применять различные трансформации - изменение позиции, изменение ориентации в пространстве и масштабирование.

Все они выполняются с помощью методов `setPosition()/move()`, `setRotation()/rotate()` и `setScale()/scale()` соответственно

Первый метод в каждой паре производит абсолютные преобразования (преобразования относительно начала координат), а второй метод производит преобразования относительно текущих значений координат/угла/масштаба

Началом координат по умолчанию является верхний левый угол спрайта. Если нам надо установить начало координат в другую точку (например, в центр спрайта), то можно использовать метод  `setOrigin()`

```cpp
sprite.setOrigin(25.f, 25.f);
```

## Проблема белого квадрата
Может быть такое, что мы успешно загрузили текстуру, правильно построили и спрайт и все что мы видим на экране - белый квадрат

Это распространенная ошибка. Когда мы устанавливаем текстуру для спрайта, то под капотом сохраняется указатель на экземпляр текстуры. Поэтому, если текстура уничтожается/перемещается в другое место в памяти, спрайт получает некорректный указатель на текстуру

Такая проблема возникает при написании функций следующего рода
```cpp
sf::Sprite loafSprite(const std::string& filename) {
	sf::Texture texture;
	textrue.loadFromFile(filename);

	return sf::Sprite(texture);
}
```

Поэтому всегда надо проверять время жизни наших текстур

## Использование большого количества текстур
Хорошей тактикой является использовать как можно меньше текстур. Это связано с тем, что изменение текущей текстуры - дорогостоящая операция для видеокарты. Рисование множества спрайтов, использующих одну и ту же текстуру, даст лучшую производительность

Кроме того, использование одной текстуры позволяет группировать статическую геометрию в одну сущность, что будет гораздо быстрее отрисовываться, чем набор из множества сущностей

*По возможности используем как можно меньше текстур*
